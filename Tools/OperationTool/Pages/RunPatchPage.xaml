<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OperationTool.Pages.RunPatchPage">
    <ContentPage.Content>
     
        <ScrollView>
            <Grid Padding="16"
                  HorizontalOptions="Center">
                <Frame HasShadow="False"
                       BorderColor="{DynamicResource Gray300}"
                       BackgroundColor="{DynamicResource White}"
                       Padding="16"
                       MaximumWidthRequest="900">
                    
                    <Grid RowSpacing="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0"
                              RowSpacing="6">
                            <HorizontalStackLayout Spacing="8">
                                <Label Text="Server Group Type:"
                                       VerticalOptions="Center" />
                                <Picker ItemsSource="{Binding ServerGroupTypes}"
                                        SelectedItem="{Binding SelectedServerGroupType}"
                                        WidthRequest="200"
                                        HorizontalOptions="Start" />
                            </HorizontalStackLayout>
                        </Grid>

                        <Grid Grid.Row="1"
                              RowSpacing="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            
                            <Label Grid.Row="0" Text="Refs File's'"
                                   FontAttributes="Bold" />
                            
                            <HorizontalStackLayout Grid.Row="1" Spacing="8">
                                <Label Text="File ID:"
                                       VerticalOptions="Center" />
                                <Picker ItemsSource="{Binding RefsFiles}"
                                        SelectedItem="{Binding SelectedRefsFile}"
                                        ItemDisplayBinding="{Binding FileId}"
                                        WidthRequest="120"
                                        HorizontalOptions="Start" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout Grid.Row="2" Spacing="4">
                                <CheckBox
                                    IsChecked="{Binding SelectedRefsFile.IsDevelopment}"
                                    IsEnabled="False" />
                                <Label Text="Is Development"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>

                            <VerticalStackLayout Grid.Row="3" Spacing="4">
                                <Label Text="Comment:" />
                                <Editor Text="{Binding SelectedRefsFile.Comment}"
                                        IsReadOnly="True"
                                        AutoSize="TextChanges"
                                        HeightRequest="80" />
                            </VerticalStackLayout>
                        </Grid>

                        <Grid Grid.Row="2"
                              RowSpacing="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            
                            <Label Grid.Row="0" Text="Version"
                                   FontAttributes="Bold" />

                            <HorizontalStackLayout Grid.Row="1" Spacing="8">
                                <Label Text="Resource Version:"
                                       VerticalOptions="Center" />
                                <Entry Text="{Binding ResourceVersion}"
                                       WidthRequest="80"
                                       IsReadOnly="True" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout Grid.Row="2" Spacing="8">
                                <Label Text="Client Major Version:"
                                       VerticalOptions="Center" />
                                <Picker ItemsSource="{Binding ClientMajorVersions}"
                                        SelectedItem="{Binding SelectedClientMajorVersion}"
                                        WidthRequest="120" />
                            </HorizontalStackLayout>
                        </Grid>

                        <HorizontalStackLayout Grid.Row="3"
                                               HorizontalOptions="End">
                            <Button Text="Execute"
                                    Command="{Binding ExecuteCommand}" />
                        </HorizontalStackLayout>
                    </Grid>
                </Frame>
            </Grid>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>
